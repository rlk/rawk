<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>RAWK: RAWK : Gigapixel Raw Image Processing Toolkit</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">RAWK
   </div>
   <div id="projectbrief">Gigapixel Raw Image Processing Toolkit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RAWK : Gigapixel Raw Image Processing Toolkit </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="manual"></a>
Manual</h1>
<p>RAWK is a command-line tool capable of performing a variety of image processing operations on very large raw binary image files. It provides a pannable, zoomable preview of the result of the process and enables image process parameters to be tuned interactively regardless of the scale of the input and output.</p>
<p>The speed and capability of RAWK lies in its reliance upon the raw binary image format, as such images may be read and written without the overhead of coding and compression, and may be many times larger than available RAM without added algorithmic complexity.</p>
<p>The simplicity of raw binary makes it the recommended format for the NASA Planetary Data System, the primary motivator of RAWK. Both Photoshop and Imagemagick are capable of transforming image into and out of raw format (for limited file sizes) enabling interoperability with off-the-shelf tools.</p>
<p>The RAWK tool emphasizes the application of several image processes in a single command. An image process is represented by a <em>tree</em> of <a class="el" href="classimage.html" title="Base class for all image sources, filters, and operators. ">image</a> objects. Each object acts as a source of pixels with a specific height, width, and depth. Each samples its own input data from zero, one, or two source image objects.</p>
<p>This tree of objects is specified on the command line. The various <a class="el" href="classimage.html" title="Base class for all image sources, filters, and operators. ">image</a> objects and their parameters are itemized below. Real-world examples of their use are given toward the end of this page.</p>
<h2><a class="anchor" id="image_objects"></a>
Image Objects</h2>
<p>There is a direct mapping between an image object's constructor and its command line arguments, so see the documentation of each individual object for usage.</p>
<h3><a class="anchor" id="image_sources"></a>
Image Sources</h3>
<p><a class="el" href="classinput.html" title="Image file reader. ">input</a> &mdash; <a class="el" href="classsolid.html" title="Solid value generator. ">solid</a></p>
<h3><a class="anchor" id="image_filters"></a>
Image Filters</h3>
<p><a class="el" href="classbias.html" title="Bias filter. ">bias</a> &mdash; <a class="el" href="classcrop.html" title="Crop filter. ">crop</a> &mdash; <a class="el" href="classcubic.html" title="Cubic-interpolated resampling filter. ">cubic</a> &mdash; <a class="el" href="classdilate.html" title="Dilation filter. ">dilate</a> &mdash; <a class="el" href="classerode.html" title="Erosion filter. ">erode</a> &mdash; <a class="el" href="classflatten.html" title="Spherical flatten. ">flatten</a> &mdash; <a class="el" href="classgain.html" title="Gain filter. ">gain</a> &mdash; <a class="el" href="classgaussian.html" title="Gaussian convolution filter. ">gaussian</a> &mdash; <a class="el" href="classgradient.html" title="Gradient filter. ">gradient</a> &mdash; <a class="el" href="classlinear.html" title="Linearly-interpolated resampling filter. ">linear</a> &mdash; <a class="el" href="classmedian.html" title="Median filter. ">median</a> &mdash; <a class="el" href="classmedianh.html" title="Median filter with a horizontal kernel. ">medianh</a> &mdash; <a class="el" href="classmedianv.html" title="Median filter with a vertical kernel. ">medianv</a> &mdash; <a class="el" href="classnearest.html" title="Nearest value resampling filter. ">nearest</a> &mdash; <a class="el" href="classnormalize.html" title="Vector renormalization filter. ">normalize</a> &mdash; <a class="el" href="classoffset.html" title="Offset filter. ">offset</a> &mdash; <a class="el" href="classoutput.html" title="Image file writer. ">output</a> &mdash; <a class="el" href="classreduce.html" title="50% down-sample filter ">reduce</a> &mdash; <a class="el" href="classrgb2yuv.html" title="RGB to YUV color space transformation. ">rgb2yuv</a> &mdash; <a class="el" href="classswizzle.html" title="Swizzle filter. ">swizzle</a> &mdash; <a class="el" href="classthreshold.html" title="Threshold filter. ">threshold</a> &mdash; <a class="el" href="classtrim.html" title="Trim filter. ">trim</a> &mdash; <a class="el" href="classyuv2rgb.html" title="YUV to RGB color space transformation. ">yuv2rgb</a></p>
<h3><a class="anchor" id="image_operators"></a>
Image Operators</h3>
<p><a class="el" href="classappend.html" title="Channel append. ">append</a> &mdash; <a class="el" href="classblend.html" title="Blend operator. ">blend</a> &mdash; <a class="el" href="classdifference.html" title="Difference operator. ">difference</a> &mdash; <a class="el" href="classpaste.html" title="Overlay operator. ">paste</a> &mdash; <a class="el" href="classsum.html" title="Sum operator. ">sum</a></p>
<h2><a class="anchor" id="interaction"></a>
Interaction</h2>
<p>On execution, RAWK displays an OpenGL window showing a <em>cache</em> of the result of the image process.</p>
<ul>
<li>Click and drag with the left mouse button to pan the cache.</li>
<li>Rotate the mouse wheel to zoom the cache.</li>
<li><b>Press Space</b> to update the cache with the modified view configuration.</li>
</ul>
<p>The window title updates to reflect the current position of the mouse pointer within the image, as well as the sample value beneath the pointer.</p>
<h3><a class="anchor" id="exploring_the_tree"></a>
Exploring the tree</h3>
<p>By default, the view displays the root of the image process tree, but image objects deeper in the tree may also be explored.</p>
<ul>
<li>Press Alt-Left to jump to the first child of the current image.</li>
<li>Press Alt-Right to jump to the second child of the current image.</li>
<li>Press Alt-Up to jump to the parent of the current image.</li>
<li><b>Press Space</b> to update the cache to display result of the current image object.</li>
</ul>
<p>The window title bar changes to reflect the current image.</p>
<h3><a class="anchor" id="modifying_parameters"></a>
Modifying parameters</h3>
<p>The parameters of many image objects may be tuned interactively.</p>
<ul>
<li>Press Left or Right to decrease or increase the first parameter of the current image.</li>
<li>Press Down or Up to decrease or increase the second parameter of the current image.</li>
<li>Again, <b>press Space</b> to update the cache to display the modified process.</li>
</ul>
<p>Hold the Shift key to magnify the increase or decrease by a factor of 10. The window title bar changes to reflect the current parameters.</p>
<h3><a class="anchor" id="storing_views"></a>
Storing Views</h3>
<p>The Function keys allow up to 12 view configurations to be stored and recalled. This includes both the position and zoom of the view as well as the current image.</p>
<ul>
<li>Hold Function-n and press Enter to store the current view in slot <em>n</em>.</li>
<li>Hold Function-n and press Space to recall the view stored in slot <em>n</em>.</li>
</ul>
<p>Parameter tuning works along side the view storage and recall mechanism:</p>
<ul>
<li>Hold Function-n and press Left or Right to decrease and increase the first parameter of the image stored in slot <em>n</em>.</li>
<li>Hold Function-n and press Down or Up to decrease and increase the first parameter of the image stored in slot <em>n</em>.</li>
</ul>
<p>This capability allows the user to view the output of one image while manipulating the parameters of another. For example, tweak an <a class="el" href="classoffset.html" title="Offset filter. ">offset</a> to bring the results of two separate processes into alignment before summing thing.</p>
<h3><a class="anchor" id="display_modes"></a>
Display Modes</h3>
<p>A variety of different data types are supported, but their interpretation must be selected manually.</p>
<ul>
<li>Press 1 to display one channel as a grayscale image.</li>
<li>Press 2 to display the luminance of an RGB image.</li>
<li>Press 3 to display three channels as an RGB image.</li>
<li>Press 4 to display one channel as a relief-shaded height map.</li>
</ul>
<h2><a class="anchor" id="data"></a>
Data Issues</h2>
<h3><a class="anchor" id="type"></a>
Sample Type</h3>
<p>A variety of sample formats are supported. The following single-character tags are used to indicate sample type in both the API and on the command line.</p>
<table class="doxtable">
<tr>
<th>Char </th><th>Type  </th></tr>
<tr>
<td><code>b</code> </td><td>8-bit unsigned integer </td></tr>
<tr>
<td><code>c</code> </td><td>8-bit signed integer </td></tr>
<tr>
<td><code>u</code> </td><td>16-bit unsigned integer </td></tr>
<tr>
<td><code>s</code> </td><td>16-bit signed integer </td></tr>
<tr>
<td><code>l</code> </td><td>32-bit unsigned integer </td></tr>
<tr>
<td><code>i</code> </td><td>32-bit signed integer </td></tr>
<tr>
<td><code>f</code> </td><td>32-bit floating point </td></tr>
<tr>
<td><code>d</code> </td><td>64-bit floating point </td></tr>
</table>
<p>Upper-case indicates non-native (byte-swapped) data order.</p>
<table class="doxtable">
<tr>
<th>Char </th><th>Type  </th></tr>
<tr>
<td><code>U</code> </td><td>16-bit unsigned integer in non-native byte order </td></tr>
<tr>
<td><code>S</code> </td><td>16-bit signed integer in non-native byte order </td></tr>
<tr>
<td><code>L</code> </td><td>32-bit unsigned integer in non-native byte order </td></tr>
<tr>
<td><code>I</code> </td><td>32-bit signed integer in non-native byte order </td></tr>
<tr>
<td><code>F</code> </td><td>32-bit floating point in non-native byte order </td></tr>
<tr>
<td><code>D</code> </td><td>64-bit floating point in non-native byte order </td></tr>
</table>
<h3><a class="anchor" id="wrap"></a>
Out-of-bounds Sampling</h3>
<p>As an image object samples and processes the pixels of its source image, accesses to neighboring pixels often occur. At the image edges, such neighbor samples may fall outside the source image. Generally, an out-of-bounds sample results in a zero value. However, it is often preferable to treat the source as a repeating pattern and <em>wrap</em> out-of-bounds references to the opposite edge. In other cases, it is sometimes necessary to clamp sample positions to ensure they fall within the source. In circumstances where this distinction is important, a mode* parameter is defined like so:</p>
<table class="doxtable">
<tr>
<th>Mode </th><th>Behavior  </th></tr>
<tr>
<td>0 </td><td>Clamp all sample positions </td></tr>
<tr>
<td>1 </td><td>Wrap vertically </td></tr>
<tr>
<td>2 </td><td>Wrap horizontally </td></tr>
<tr>
<td>3 </td><td>Wrap both vertically and horizontally </td></tr>
</table>
<h1><a class="anchor" id="examples"></a>
Examples</h1>
<h2><a class="anchor" id="pds"></a>
Planetary Data System</h2>
<p>The following examples demonstrate processing of the <a href="http://pds-geosciences.wustl.edu/missions/mgs/megdr.html">Mars Orbiter Laser Altimeter</a> data set, a 46080 &times; 23040 terrain map of the planet Mars distributed in the form of sixteen raw image tiles.</p>
<p>This first example simply loads and displays one of the tiles. Each tile has a size of 11520 &times; 5632 with one 16-bit signed integer channel in big-endian byte order. If you're using a little-endian CPU then the correct type tag is <code>S</code>. </p>
<pre class="fragment">rawk input megt00n270hb.img 0 5632 11520 1 S
</pre><p>There's not much to see. It's too dark because the pixel values, being signed, range from -1 to +1. Negative pixel values cannot be displayed unless the image is biased to make them positive. So... </p>
<pre class="fragment">rawk bias 0.5 \
        input megt00n270hb.img 0 5632 11520 1 S
</pre><p>The terrain of Mars becomes visible, including Valles Marineris and the north end of Argyre Planitia. To broaden the scope of the view, paste the tile to the south atop this tile, offset by 5632 rows and 0 columns to line them up correctly. </p>
<pre class="fragment">rawk bias 0.5 \
        paste 5632 0 input megt44s270hb.img 0 5632 11520 1 S \
                     input megt00n270hb.img 0 5632 11520 1 S
</pre><p>That completes the view of Argyre Planitia. This basic technique can be expanded to view the entire planet. </p>
<pre class="fragment">rawk bias 0.5 \
        paste 16896 34560 input megt44s270hb.img 0 5632 11520 1 S \
        paste 16896 23040 input megt44s180hb.img 0 5632 11520 1 S \
        paste 16896 11520 input megt44s090hb.img 0 5632 11520 1 S \
        paste 16896     0 input megt44s000hb.img 0 5632 11520 1 S \
        paste 11264 34560 input megt00n270hb.img 0 5632 11520 1 S \
        paste 11264 23040 input megt00n180hb.img 0 5632 11520 1 S \
        paste 11264 11520 input megt00n090hb.img 0 5632 11520 1 S \
        paste 11264     0 input megt00n000hb.img 0 5632 11520 1 S \
        paste  5632 34560 input megt44n270hb.img 0 5632 11520 1 S \
        paste  5632 23040 input megt44n180hb.img 0 5632 11520 1 S \
        paste  5632 11520 input megt44n090hb.img 0 5632 11520 1 S \
        paste  5632     0 input megt44n000hb.img 0 5632 11520 1 S \
        paste     0 34560 input megt88n270hb.img 0 5632 11520 1 S \
        paste     0 23040 input megt88n180hb.img 0 5632 11520 1 S \
        paste     0 11520 input megt88n090hb.img 0 5632 11520 1 S \
                          input megt88n000hb.img 0 5632 11520 1 S
</pre><p>Now the full 46080 &times; 23040 image can be browsed. Note that there is no significant performance impact associated with loading all sixteen tiles separately in this fashion. There is no need to pre-preprocess these tiles to a single contiguous billion-pixel image, so all subsequent Mars terrain processing operations may act upon the raw data as downloaded direct from NASA.</p>
<p>As an example of an interesting image process, let's compute the gradient of the Martian terrain. Note that the map wraps around west-to-east, but clamps at the north and south poles. For this reason, the wrap mode for a planetary surface map is usually 2. Finally, as the slope of the Martian terrain is quite gradual, we'll scale the magnitude by 10 to make it visible. </p>
<pre class="fragment">rawk gain 10.0 \
        gradient 2 \
            paste 16896 34560 input megt44s270hb.img 0 5632 11520 1 S \
            paste 16896 23040 input megt44s180hb.img 0 5632 11520 1 S \
            paste 16896 11520 input megt44s090hb.img 0 5632 11520 1 S \
            paste 16896     0 input megt44s000hb.img 0 5632 11520 1 S \
            paste 11264 34560 input megt00n270hb.img 0 5632 11520 1 S \
            paste 11264 23040 input megt00n180hb.img 0 5632 11520 1 S \
            paste 11264 11520 input megt00n090hb.img 0 5632 11520 1 S \
            paste 11264     0 input megt00n000hb.img 0 5632 11520 1 S \
            paste  5632 34560 input megt44n270hb.img 0 5632 11520 1 S \
            paste  5632 23040 input megt44n180hb.img 0 5632 11520 1 S \
            paste  5632 11520 input megt44n090hb.img 0 5632 11520 1 S \
            paste  5632     0 input megt44n000hb.img 0 5632 11520 1 S \
            paste     0 34560 input megt88n270hb.img 0 5632 11520 1 S \
            paste     0 23040 input megt88n180hb.img 0 5632 11520 1 S \
            paste     0 11520 input megt88n090hb.img 0 5632 11520 1 S \
                              input megt88n000hb.img 0 5632 11520 1 S
</pre><p>To produce a finished image file of this process at full resolution, introduce an output node giving the file name. There's no reason to store magnitudes as signed values, so <code>b</code> is a reasonable type tag. </p>
<pre class="fragment">rawk output megt-gradient.raw b \
        gain 10.0 \
            gradient 2 \
                paste 16896 34560 input megt44s270hb.img 0 5632 11520 1 S \
                paste 16896 23040 input megt44s180hb.img 0 5632 11520 1 S \
                paste 16896 11520 input megt44s090hb.img 0 5632 11520 1 S \
                paste 16896     0 input megt44s000hb.img 0 5632 11520 1 S \
                paste 11264 34560 input megt00n270hb.img 0 5632 11520 1 S \
                paste 11264 23040 input megt00n180hb.img 0 5632 11520 1 S \
                paste 11264 11520 input megt00n090hb.img 0 5632 11520 1 S \
                paste 11264     0 input megt00n000hb.img 0 5632 11520 1 S \
                paste  5632 34560 input megt44n270hb.img 0 5632 11520 1 S \
                paste  5632 23040 input megt44n180hb.img 0 5632 11520 1 S \
                paste  5632 11520 input megt44n090hb.img 0 5632 11520 1 S \
                paste  5632     0 input megt44n000hb.img 0 5632 11520 1 S \
                paste     0 34560 input megt88n270hb.img 0 5632 11520 1 S \
                paste     0 23040 input megt88n180hb.img 0 5632 11520 1 S \
                paste     0 11520 input megt88n090hb.img 0 5632 11520 1 S \
                                  input megt88n000hb.img 0 5632 11520 1 S
</pre><p>This might take a minute or two, depending on the number of processor cores available. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
